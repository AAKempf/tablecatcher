jQuery(document).ready(function(){const x=new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR",minimumFractionDigits:2});const g="up";const E="down";const o="equal";var v=[];var u=[];var G=0;var F=0;var q=0;var l=0;var k=0;var c=0;var b=0;const C="YYYYMMDD";const D=moment().format(C);var B=D;const p=moment().subtract("days",7).format(C);const f=moment().subtract("days",14).format(C);const A=moment().subtract("days",30).format(C);const e=moment().subtract("days",365).format(C);var n=jQuery("table.tablepress tbody tr").map(function(){var K=jQuery(this).find("td");var J=K[0].innerHTML;var H=parseFloat(K[1].innerHTML.replace(",","."))+""*1;var i=moment(a(J,"YYYY-MM-DD")).format(C);H=H?H:null;if(i>=e&&i<=D){if(K[2]){var I=parseFloat(K[2].innerHTML.replace(",","."))+""*1;I=I?I:null;return{Datum:J,A:H,B:I}}else{return{Datum:J,A:H}}}}).get();var w=0;var t=[];var s=[];n.forEach(function(i){B=moment(a(i.Datum,"YYYY-MM-DD")).format(C);if(B>=f){if(i.A){t[w]=i.A;c=i.A;l=t[w-1];if(!l){var H;for(H=2;H<6;H++){if(t[w-H]){l=t[w-H];break}}}if(B<=p){G+=i.A;q++}}if(i.B){s[w]=i.B;b=i.B;k=s[w-1];if(!k){for(H=2;H<6;H++){if(s[w-H]){k=s[w-H];break}}}if(B<=p){F+=i.B}}w++}if(B>=A&&B<=D){v.push(i)}if(B>=p&&B<=D){u.push(i)}});var z=(c-l)>0?g:E;if(c-l===0){z=o}var j=G/q;if(F){var h=F/q;var y=(b-k)>0?g:E;if(b-k===0){y=o}m("avg_preweek_b",x.format(h));m("price_preday_b",x.format(k));m("price_today_b",x.format(b));r("trend_b",y)}m("avg_preweek_a",x.format(j));m("price_preday_a",x.format(l));m("price_today_a",x.format(c));r("trend_a",z);d("year",n);d("week",u);d("month",v);function a(H){var i=H.split(".");return i[2]+"-"+i[1]+"-"+i[0]}function m(i,H){jQuery("#"+i).html(H)}function r(H,i){var I="morris-trend morris-trend-"+i;jQuery("#"+H).addClass(I)}function d(i,H){new Morris.Line({element:"morris-"+i,data:H,xkey:"Datum",ykeys:["A","B"],labels:["A"],lineColors:["#007bc3","#636c30"],gridIntegers:true,ymin:"auto",ymax:"auto",xLabelangle:60,xLabels:"month",yLabelFormat:function(I){return x.format(I)+" / 100l"},hidehover:"auto",hoverCallback:function(K,J){var M=J.data[K];var N="";if(M.A){var L=x.format(M.A);N='<div class="strong">'+M.Datum+"<br>"+L+" / 100l </div>"}if(M.B){var I=x.format(M.B);N='<div class="strong">'+M.Datum+"<br>Standard: "+L+" / 100l<br>Premium: "+I+" / 100l </div>"}jQuery(".morris-hover").html(N)},pointSize:3,parseTime:false,continuousLine:true})}});